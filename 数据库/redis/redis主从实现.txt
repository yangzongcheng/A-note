主从复制，是指将一台Redis服务器的数据，复制到其他的Redis服务器。前者称为主节点(master)，后者称为从节点(slave),数据的复制是单向的，只能由主节点到从节点。

默认情况下，每台Redis服务器都是主节点；且一个主节点可以有多个从节点(或没有从节点)，但一个从节点只能有一个主节点。


redis主从复制特性：
使用异步复制
一个主服务器可以有多个从服务器
从服务器也可以有自己的从服务器
复制不会阻塞主服务器
可以通过复制功能来让主服务器免于执行持久化操作，由从服务器去执行持久化操作即可



主从架构实现：
1、启动实例
1）在当前目录下，创建6379、6380、6381目录，
2）分别将安装目录下的redis.conf拷贝到这三个目录下。
3）分别修改3个目录下的redis.confg配置文件，将端口分别设置为：6379（Master）、6380（Slave）、6381（Slave）。同时要设置pidfile文件为不同的路径。
vi 6380/redis.conf

vi 6381/redis.conf
4）分别启动三个redis实例

2、设置主从

设置主从的两种方式
在redis中设置主从有2种方式：
1、 在redis.conf中设置slaveof
a) slaveof <masterip><masterport>
2、 使用redis-cli客户端连接到redis服务，执行slaveof命令
a) slaveof <masterip><masterport>

第二种方式在重启后将失去主从复制关系。

我们此处采用第二种方式进行演示。生产环境应该采用第一种。

我们以6379为主，其它两个为从。

登录6380和6381，使用slaveof127.0.0.1 6379命令

输入INFO replication查看主从信息，成功！