协程
协程可以理解为纯用户态的线程，其通过协作而不是抢占来进行切换。相对于进程或者线程，协程所有的操作都可以在用户态完成，创建和切换的消耗更低。

和进程的关系
一个进程内部可以运行多个线程，而每个线程又可以运行很多协程。
线程要负责对协程进行调度，保证每个协程都有机会得到执行。
当一个协程睡眠时，它要将线程的运行权让给其它的协程来运行，而不能持续霸占这个线程。
同一个线程内部最多只会有一个协程正在运行。


状态
协程可以简化为三个状态：运行态、就绪态和休眠态。
同一个线程中最多只会存在一个处于运行态的协程。
就绪态协程是指那些具备了运行能力但是还没有得到运行机会的协程，它们随时会被调度到运行态；
休眠态的协程还不具备运行能力，它们是在等待某些条件的发生，比如 IO 操作的完成、睡眠时间的结束等。


子协程的异常退出会将异常传播到主协程，直接会导致主协程也跟着挂掉。


应用
协程一般用 TCP/HTTP/RPC服务、消息推送系统、聊天系统等。使用协程，我们可以很方便的搭建一个支持高并发的TCP或HTTP服务端。